{% extends 'base.html' %}
{% load static %}

{% block bg %}
    style="background-image: url('{% static 'assets/bg3.png' %}'); background-size: cover; background-position: center; background-repeat: no-repeat;"
{% endblock %}

{% block coluna_esquerda %}
<div class="coluna">
    <h3>Bem vindo </h3>
    <h2 style="color:blueviolet;">{{username}}</h2>
    <div class="text-center">
        <img src="{% static 'assets/profile1.png' %}" alt="Foto do perfil" class="bg-secondary" style="width: 100%; border-radius: 50%; border: 5px solid;">
    </div>

    <div class="container mt-3">
        <p>Barra de Progresso</p>
        <div class="progress" style="height: 2vh;">
            <div id="progress-bar" class="progress-bar" role="progressbar"></div>
        </div>
        <h2 id="level-counter" class="mt-3">Nível: 0</h2>
    </div>
    <button id="increase-btn" class="btn btn-success m-4 btn-lg rounded-5">Adicionar Reciclagem</button>
    <a class="btn btn-warning me-3 btn-lg mt-auto m-4 rounded-5" href="{% url 'logout' %}">Sair</a>
    <script>
        // JS para aumentar a barra de progresso e atualizar o contador
        document.addEventListener('DOMContentLoaded', function() {
            const progressBar = document.getElementById('progress-bar');
            const increaseBtn = document.getElementById('increase-btn');
            const levelCounter = document.getElementById('level-counter');
            const badges = document.getElementById('badges');
            const badge1 = document.getElementById('badge1');
            const badge2 = document.getElementById('badge2'); 

            let currentLevel = 0;

            increaseBtn.addEventListener('click', function() {
                // Obter a largura atual da barra de progresso
                let currentWidth = parseInt(progressBar.style.width) || 0;

                // Aumentar a barra em 10%
                if (currentWidth < 100) {
                    currentWidth += 10;
                    progressBar.style.width = currentWidth + '%';
                }

                if (currentWidth >= 100) {
                    currentLevel++; 
                    levelCounter.textContent = 'Nível: ' + currentLevel; 
                    progressBar.style.width = '0'; // Reseta a barra de progresso

                    if (currentLevel === 2) {
                        badge1.style.display = 'inline'; // Exibe o emoji de reciclagem
                        badges.style.display = 'block';
                    }
                    
                    if (currentLevel === 3) {
                        badge2.style.display = 'inline'; // Exibe o emoji de troféu
                    }
                }
            });
        });
    </script>
</div>
{% endblock %}

{% block conteudo %}
<div class="coluna-central">
    <nav class="navbar-profile">
        <a href="{% url 'profile' conteudo='resumo' %}" class="nav-link">Resumo</a>
        <a href="{% url 'profile' conteudo='pontos' %}" class="nav-link">Pontos</a>
        <a href="{% url 'profile' conteudo='ranking' %}" class="nav-link">Ranking</a>
        <a href="{% url 'profile' conteudo='coisa' %}" class="nav-link">Coisa</a>
    </nav>

    {% if conteudo == 'resumo' %}
        {% include 'profile_tabs/resumo.html' %}
    {% elif conteudo == 'pontos' %}
        {% include 'profile_tabs/pontos.html' %}
    {% elif conteudo == 'ranking' %}
        {% include 'profile_tabs/ranking.html' %}
    {% elif conteudo == 'coisa' %}
        {% include 'profile_tabs/coisa.html' %}
    {% endif %}
</div>
{% endblock %}

{% block coluna_direita %}
<div class="coluna">
    <h5>Conquistas</h5>
    <div>
        <div class="d-flex justify-content-center">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
        </div>
        <div class="d-flex justify-content-center">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
        </div>
        <div class="d-flex justify-content-center">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
        </div>
        <div class="d-flex justify-content-center">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
        </div>
        <div class="d-flex justify-content-center">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
            <img src="{% static 'assets/logo/LOGOMARCA.png' %}" alt="" width="80px">
        </div>
    </div>
</div>
{% endblock %}
